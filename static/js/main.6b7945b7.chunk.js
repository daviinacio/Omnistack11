(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{27:function(e,t,a){e.exports=a.p+"static/media/heroes.1f4b5508.png"},30:function(e,t,a){e.exports=a(63)},53:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),o=a.n(c),l=a(6),u=a(10),i=a(4),s=a.n(i),m=a(8),p=a(1),d=a(7),f=a(26),h=a.n(f).a.create({baseURL:"https://omnistack11-di.herokuapp.com"}),E=(a(53),a(27)),b=a.n(E),g=a(9),v=a.n(g);function O(){var e=Object(n.useState)(localStorage.getItem("ongId")||""),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(u.f)();function i(){return(i=Object(m.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.preventDefault(),e.next=3,h.post("/sessions",{id:a}).then((function(e){console.log(e.data.name),localStorage.setItem("ongId",a),localStorage.setItem("ongName",e.data.name),o.push("/profile")})).catch((function(e){alert("Falha no login")}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){localStorage.getItem("ongId")&&o.push("/profile")}),[]),r.a.createElement("div",{className:"logon-container"},r.a.createElement("section",{className:"form"},r.a.createElement("img",{src:v.a,alt:"Be The Hero"}),r.a.createElement("form",{id:"logon",onSubmit:function(e){return i.apply(this,arguments)}},r.a.createElement("h1",null,"Fa\xe7a seu logon"),r.a.createElement("input",{placeholder:"Sua ID",required:"required",pattern:"[a-z0-9]{1,8}",value:a,onChange:function(e){return c(e.target.value.substring(0,8).toLowerCase())}}),r.a.createElement("button",{className:"button",type:"submit"},"Entrar"),r.a.createElement(l.b,{className:"back-link",to:"/register"},r.a.createElement(d.b,{size:16,color:"var(--accent-color)"}),"N\xe3o tenho cadastro"))),r.a.createElement("img",{src:b.a,alt:"Heroes"}))}a(59);function j(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),i=Object(p.a)(o,2),f=i[0],E=i[1],b=Object(n.useState)(""),g=Object(p.a)(b,2),O=g[0],j=g[1],S=Object(n.useState)(""),y=Object(p.a)(S,2),C=y[0],N=y[1],I=Object(n.useState)(""),q=Object(p.a)(I,2),k=q[0],w=q[1],x=Object(u.f)();function z(){return(z=Object(m.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,h.post("/ongs",{name:a,email:f,whatsapp:O,city:C,uf:k}).then((function(e){alert("Seu ID de acesso: ".concat(e.data.id)),x.push("/")})).catch((function(e){alert("Erro no cadastro, tente novamente")}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",{className:"register-container"},r.a.createElement("div",{className:"content"},r.a.createElement("section",null,r.a.createElement("img",{src:v.a,alt:"Be The Hero"}),r.a.createElement("h1",null,"Cadastro"),r.a.createElement("p",null,"Fa\xe7a seu cadastro, entre na plataforma e ajude pessoas a encontrarem os casos da sua ONG."),r.a.createElement(l.b,{className:"back-link",to:"/"},r.a.createElement(d.a,{size:16,color:"var(--accent-color)"}),"J\xe1 tenho cadastro")),r.a.createElement("form",{onSubmit:function(e){return z.apply(this,arguments)}},r.a.createElement("input",{placeholder:"Nome da ONG",required:"required",pattern:"[A-z-\xc0-\u017e-0-9\\s]{1,64}",value:a,onChange:function(e){return c(e.target.value.substring(0,64))}}),r.a.createElement("input",{type:"email",placeholder:"E-mail",required:"required",value:f,onChange:function(e){return E(e.target.value)}}),r.a.createElement("input",{placeholder:"WhatsApp",required:"required",type:"number",pattern:"[0-9]{10,11}",value:O,onChange:function(e){return j(e.target.value.substring(0,11))},onKeyPress:function(e){(e.charCode<48||e.charCode>57)&&e.preventDefault()}}),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{placeholder:"Cidade",required:"required",pattern:"[A-z-\xc0-\u017e-0-9\\s]{1,32}",value:C,onChange:function(e){return N(e.target.value.substring(0,32))}}),r.a.createElement("input",{placeholder:"UF",required:"required",style:{width:80},pattern:"[A-Z\\s]{2,2}",value:k,onChange:function(e){return w(e.target.value.substring(0,2).toUpperCase())}})),r.a.createElement("button",{className:"button",type:"submit"},"Cadastrar"))))}a(60);function S(){var e=localStorage.getItem("ongId"),t=localStorage.getItem("ongName"),a=Object(n.useState)([]),c=Object(p.a)(a,2),o=c[0],i=c[1],f=Object(u.f)();function E(){return(E=Object(m.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.delete("/incidents/".concat(a),{headers:{authorization:e}}).then((function(e){i(o.filter((function(e){return e.id!=a})))})).catch((function(e){alert("Erro ao deletar caso, tente novamente.")}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(){localStorage.clear(),f.push("/")}return Object(n.useEffect)((function(){localStorage.getItem("ongId")||b()}),[]),Object(n.useEffect)((function(){h.get("/profile",{headers:{authorization:e}}).then((function(e){i(e.data.incidents)})).catch((function(e){401==e.response.status&&b()}))}),[e]),r.a.createElement("div",{className:"profile-container"},r.a.createElement("header",null,r.a.createElement("img",{src:v.a,alt:"Be The Hero"}),r.a.createElement("span",null,"Bem vindo(a), ",t),r.a.createElement(l.b,{className:"button",to:"/incidents/new"},"Cadastrar novo caso"),r.a.createElement("button",{onClick:b,type:"button"},r.a.createElement(d.c,{size:18,color:"var(--accent-color)"}))),r.a.createElement("h1",null,"Casos cadastrados"),r.a.createElement("ul",null,o.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("strong",null,"CASO:"),r.a.createElement("p",null,e.title),r.a.createElement("strong",null,"DESCRI\xc7\xc3O:"),r.a.createElement("p",null,e.description),r.a.createElement("strong",null,"VALOR:"),r.a.createElement("p",null,Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.value)),r.a.createElement("button",{onClick:function(){return function(e){return E.apply(this,arguments)}(e.id)},type:"button"},r.a.createElement(d.d,{size:20,color:"#a8a8b3"})))}))))}a(61);function y(){var e=localStorage.getItem("ongId"),t=Object(n.useState)(""),a=Object(p.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(""),f=Object(p.a)(i,2),E=f[0],b=f[1],g=Object(n.useState)(""),O=Object(p.a)(g,2),j=O[0],S=O[1],y=Object(u.f)();function C(){return(C=Object(m.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n={title:c,description:E,value:j},t.next=4,h.post("incidents",n,{headers:{authorization:e}}).then((function(e){y.push("/profile")})).catch((function(e){alert("Erro ao cadastrar, tente novamente")}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement("div",{className:"new-incident-container"},r.a.createElement("div",{className:"content"},r.a.createElement("section",null,r.a.createElement("img",{src:v.a,alt:"Be The Hero"}),r.a.createElement("h1",null,"Cadastrar novo caso"),r.a.createElement("p",null,"Descreva o caso detalhadamente para encontrar um her\xf3i para resolver isso."),r.a.createElement(l.b,{className:"back-link",to:"/profile"},r.a.createElement(d.a,{size:16,color:"var(--accent-color)"}),"Voltar para home")),r.a.createElement("form",{onSubmit:function(e){return C.apply(this,arguments)}},r.a.createElement("input",{placeholder:"T\xedtulo do caso",required:"required",pattern:"[A-z-\xc0-\u017e-0-9\\s]{1,50}",value:c,onChange:function(e){return o(e.target.value)}}),r.a.createElement("textarea",{placeholder:"Descri\xe7\xe3o",required:"required",pattern:"[A-z-\xc0-\u017e-0-9\\s]{1,1024}",value:E,onChange:function(e){return b(e.target.value)}}),r.a.createElement("input",{placeholder:"Valor em reais",required:"required",type:"number",min:"1",step:"any",pattern:"^\\d+(\\.|\\,)\\d{2}$",value:j,onChange:function(e){return S(e.target.value)}}),r.a.createElement("button",{className:"button",type:"submit"},"Cadastrar"))))}function C(){return r.a.createElement(l.a,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/",exact:!0,component:O}),r.a.createElement(u.a,{path:"/register",component:j}),r.a.createElement(u.a,{path:"/profile",component:S}),r.a.createElement(u.a,{path:"/incidents/new",component:y})))}a(62);var N=function(){return r.a.createElement(C,null)};o.a.render(r.a.createElement(N,null),document.getElementById("root"))},9:function(e,t,a){e.exports=a.p+"static/media/logo.7eea718b.svg"}},[[30,1,2]]]);
//# sourceMappingURL=main.6b7945b7.chunk.js.map